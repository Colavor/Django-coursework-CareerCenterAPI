<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% if vacancy %}Редактировать вакансию{% else %}Добавить вакансию{% endif %}</title>
</head>
<body>
    <h1>{% if vacancy %}Редактировать вакансию{% else %}Вакансия{% endif %}</h1>
    <p><a href="/vacancies/">Назад</a></p>
    
    {% if error %}
    <p style="color: red;">Ошибка: {{ error }}</p>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        <p>
            <label>Название вакансии:</label><br>
            <input type="text" name="title" value="{{ vacancy.title|default:'' }}" required>
        </p>
        <p>
            <label>Компания:</label><br>
            {% if companies %}
            <select name="company" required>
                {% for company in companies %}
                <option value="{{ company.id }}" {% if vacancy and vacancy.company.id == company.id %}selected{% endif %}>{{ company.name }}</option>
                {% endfor %}
            </select>
            {% else %}
            <p style="color: red;">Нет компаний. Добавьте компанию через <a href="/admin/">админку</a> или <a href="/companies/add/">здесь</a></p>
            {% endif %}
        </p>
        <p>
            <label>Описание:</label><br>
            <textarea name="description" rows="5" required>{{ vacancy.description|default:'' }}</textarea>
        </p>
        <p>
            <label>Требования:</label><br>
            <textarea name="requirements" rows="3">{{ vacancy.requirements|default:'' }}</textarea>
        </p>
        <p>
            <label>Зарплата:</label><br>
            <input type="number" name="salary" value="{{ vacancy.salary|default:'' }}" required>
        </p>
        <p>
            <label>Тип занятости:</label><br>
            <select name="employment_type">
                <option value="full_time" {% if vacancy and vacancy.employment_type == 'full_time' %}selected{% endif %}>Полная занятость</option>
                <option value="part_time" {% if vacancy and vacancy.employment_type == 'part_time' %}selected{% endif %}>Частичная занятость</option>
                <option value="internship" {% if vacancy and vacancy.employment_type == 'internship' %}selected{% endif %}>Стажировка</option>
                <option value="contract" {% if vacancy and vacancy.employment_type == 'contract' %}selected{% endif %}>Контракт</option>
                <option value="remote" {% if vacancy and vacancy.employment_type == 'remote' %}selected{% endif %}>Удалённо</option>
            </select>
        </p>
        <p>
            <label>График работы:</label><br>
            <input type="text" name="schedule" value="{{ vacancy.schedule|default:'' }}" placeholder="Например: 5/2, гибкий график">
        </p>
        <p>
            <label>Локация:</label><br>
            <input type="text" name="location" value="{{ vacancy.location|default:'' }}" placeholder="Например: Москва, ул. Примерная, 1">
        </p>
        <p>
            <label>Статус:</label><br>
            <select name="status">
                <option value="draft" {% if vacancy and vacancy.status == 'draft' %}selected{% endif %}>Черновик</option>
                <option value="active" {% if vacancy and vacancy.status == 'active' %}selected{% endif %}>Активна</option>
                <option value="closed" {% if vacancy and vacancy.status == 'closed' %}selected{% endif %}>Закрыта</option>
                <option value="archived" {% if vacancy and vacancy.status == 'archived' %}selected{% endif %}>Архив</option>
            </select>
        </p>
        <p>
            <button type="submit">Сохранить</button>
        </p>
    </form>
</body>
</html>
